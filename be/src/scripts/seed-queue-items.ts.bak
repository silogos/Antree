import { getDb } from './db/index.js';
import { queueItems } from './db/schema.js';
import { v4 as uuidv4 } from 'uuid';

async function seedQueueItems() {
  const db = getDb();

  console.log('ğŸŒ± Seeding queue items with metadata...');

   // Medical queue items
   const medicalQueueItems = [
     {
       id: uuidv4(),
       batchId: 'batch-medical',
       boardId: null, // Deprecated
       templateId: 'template-medical',
       queueNumber: 'A001',
       name: 'Ahmad Santoso',
       statusId: '88ed12b8-45a8-4b0e-b2ad-46a4e409897e', // Waiting
       metadata: {
         service: 'General Checkup',
         priority: 'high',
         phone: '+62-812-3456-7890',
         notes: 'VIP customer',
         insurance: 'BPJS',
         age: 45,
         symptoms: ['headache', 'fatigue'],
       },
     },
     {
       id: uuidv4(),
       batchId: 'batch-medical',
       boardId: null, // Deprecated
       templateId: 'template-medical',
       queueNumber: 'A002',
       name: 'Siti Rahayu',
       statusId: 'acb76bc5-a252-4fb3-9a42-4a12581fa7a3', // In Progress
       metadata: {
         service: 'Vaccination',
         priority: 'normal',
         phone: '+62-813-5678-9012',
         vaccineType: 'COVID-19 Booster',
         doseNumber: 3,
         previousVaccination: '2023-06-15',
       },
     },
     {
       id: uuidv4(),
       batchId: 'batch-medical',
       boardId: null, // Deprecated
       templateId: 'template-medical',
       queueNumber: 'A003',
       name: 'Budi Hartono',
       statusId: 'b2936f86-64c6-43a5-b52e-37231172d62e', // Done
       metadata: {
         service: 'Laboratory Test',
        priority: 'urgent',
        phone: '+62-814-7890-1234',
        testType: 'Blood Test',
        doctorNotes: 'Patient has diabetes history',
        fastingSince: '2026-02-14 06:00:00',
        fastingRequired: true,
      },
    },
     {
       id: uuidv4(),
       batchId: 'batch-medical',
       boardId: null,
       templateId: 'template-medical',
       queueNumber: 'A004',
       name: 'Dewi Sartika',
       statusId: '88ed12b8-45a8-4b0e-b2ad-46a4e409897e', // Waiting
       metadata: {
         service: 'X-Ray',
         priority: 'normal',
         phone: '+62-815-9012-3456',
         bodyPart: 'Chest',
         reason: 'Persistent cough',
         referral: 'Dr. Ahmad',
       },
     },
   ];

   // Banking queue items
   const bankingQueueItems = [
     {
       id: uuidv4(),
       batchId: 'batch-banking',
       boardId: null,
       templateId: 'template-banking',
       queueNumber: 'B001',
       name: 'Hendra Wijaya',
       statusId: '1a03288e-b7ae-479a-844b-6b2caa6c0e69', // Waiting
       metadata: {
         service: 'Account Opening',
         accountType: 'Savings',
         initialDeposit: 5000000,
         branch: 'Jakarta',
         idNumber: '3201xxxxxxxxxx',
         taxId: '12.345.678.9-000.000',
         referralCode: 'REF123',
       },
     },
     {
       id: uuidv4(),
       batchId: 'batch-banking',
       boardId: null,
       templateId: 'template-banking',
       queueNumber: 'B002',
       name: 'Maya Sari',
       statusId: '44b53851-8af9-43ce-8609-be2bd5058cce', // Serving
       metadata: {
         service: 'Loan Application',
         priority: 'high',
         loanType: 'KPR',
         amount: 750000000,
         tenure: 15, // years
         propertyAddress: 'Jl. Sudirman No. 123, Jakarta',
         monthlyIncome: 15000000,
         existingLoans: false,
       },
     },
     {
       id: uuidv4(),
       batchId: 'batch-banking',
       boardId: null,
       templateId: 'template-banking',
       queueNumber: 'B003',
       name: 'Rizky Pratama',
       statusId: '6a6a6863-b70a-4d94-9fdf-99a20cc48deb', // Completed
       metadata: {
         service: 'Money Transfer',
         priority: 'urgent',
         transferType: 'International',
         amount: 1000, // USD
         currency: 'USD',
         beneficiary: 'John Smith',
         beneficiaryBank: 'Chase Bank',
         beneficiaryAccount: 'XXXX-XXXX-1234',
         purpose: 'Family support',
       },
     },
   ];

   // Admin queue items
   const adminQueueItems = [
     {
       id: uuidv4(),
       batchId: 'batch-admin',
       boardId: null,
       templateId: 'template-admin',
       queueNumber: 'C001',
       name: 'Eko Prasetyo',
       statusId: 'fbfd0d4a-6c28-49c6-8321-8f511437cb2a', // Pending
       metadata: {
         service: 'Business License',
         businessType: 'PT',
         companyName: 'PT Maju Jaya',
         companyAddress: 'Jl. Thamrin No. 45, Jakarta',
        businessSector: 'Technology',
        capital: 5000000000,
        documents: ['KTP', 'NPWP', 'Company Deed'],
        expedited: true,
        expeditedFee: 2000000,
      },
    },
    {
      id: uuidv4(),
      batchId: 'batch-admin',
      boardId: null,
      templateId: 'template-admin',
      queueNumber: 'C002',
      name: 'Dian Pertiwi',
      statusId: 'a6507b1b-f1ed-4519-91b4-ec1e60ca6635', // Processing
      metadata: {
        service: 'Resident Permit',
        permitType: 'KTP',
        reason: 'New Card',
        previousCardLost: true,
        lossDate: '2026-02-10',
        policeReportNumber: 'LP/123/II/2026',
        idNumber: '3201xxxxxxxxxx',
        documentsSubmitted: ['Police Report', 'KTP Family', 'Passport Photo'],
      },
    },
     {
       id: uuidv4(),
       batchId: 'batch-admin',
       boardId: null,
       templateId: 'template-admin',
       queueNumber: 'C003',
       name: 'Karim Syah',
       statusId: 'c0e26733-e5a1-4fbe-9379-6a672e093426', // Approved
       metadata: {
         service: 'Building Permit',
         permitType: 'IMB',
         buildingType: 'Rumah Tinggal',
         buildingArea: 120, // m2
         landArea: 200, // m2
         buildingFloors: 2,
         buildingAddress: 'Jl. Melati No. 7, Jakarta',
        architect: 'CV Arsitek Jaya',
        structuralEngineer: 'PT Konstruksi Mandiri',
        approvalDate: '2026-02-14',
        permitNumber: 'IMB/2026/001234',
      },
    },
     {
       id: uuidv4(),
       batchId: 'batch-admin',
       boardId: null,
       templateId: 'template-admin',
       queueNumber: 'C004',
       name: 'Lina Amalia',
       statusId: '0a2f7fc4-434f-4432-a9b9-01776ff845ad', // Rejected
       metadata: {
         service: 'Certificate Request',
         certificateType: 'Birth Certificate',
         purpose: 'Passport Application',
         applicantRelation: 'Self',
         rejectionReason: 'Incomplete documents - missing parent marriage certificate',
         submittedDate: '2026-02-12',
         reviewedDate: '2026-02-13',
         reviewer: 'Officer Ahmad',
         canReapply: true,
         reapplyInstructions: 'Submit complete documents at counter 5',
       },
     },
  ];

  const allQueueItems = [...medicalQueueItems, ...bankingQueueItems, ...adminQueueItems];

  await db.insert(queueItems).values(allQueueItems);
  console.log('âœ… Seeded queue items:', allQueueItems.length);
  console.log(`   - Medical: ${medicalQueueItems.length}`);
  console.log(`   - Banking: ${bankingQueueItems.length}`);
  console.log(`   - Admin: ${adminQueueItems.length}`);

  console.log('ğŸ‰ Queue items seeding completed!');
}

seedQueueItems().catch((error) => {
  console.error('âŒ Seeding failed:', error);
  process.exit(1);
});
